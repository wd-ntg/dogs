import userService from "../../service/userService";
import {
  userLoginFailed,
  userLoginSuscess,
  userRegisterFailed,
} from "../slice/userSlice";

export const userRegister = (data) => {
  return async (dispactch) => {
    try {
      const res = await userService.userRegister(data);


      console.log("res ", res);


      if (res.success == true) {
        dispactch(userLoginSuscess(res.data));
        return {
          errCode: 0,
          message: "Đăng ký thành công!",
        };
      } else if (res.success == false && res.data) {
          dispactch(userLoginSuscess(res.data));
          return {
            errCode: 0,
            message: "Đăng nhập thành công!",
          }
      }  else {
        dispactch(userRegisterFailed());
        return {
          errCode: 500,
          message: "Đăng ký thất bị!",
        };
      }
    } catch (error) {
      dispactch(userRegisterFailed());
      return {
        errCode: 500,
        message: "Đăng ký thất bại!",
      };
    }
  };
};
